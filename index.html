import React, { useState, useEffect, useRef } from 'react';
import { 
  Home, 
  Zap, 
  Book, 
  Mic2, 
  ChevronRight, 
  Play, 
  RotateCcw,
  Star,
  Music,
  CheckCircle2,
  XCircle,
  ArrowRight,
  Edit3,
  Trophy,
  HelpCircle,
  MinusCircle,
  PlusCircle,
  Info,
  Clock,
  MessageCircleQuestion
} from 'lucide-react';

const App = () => {
  const [activeTab, setActiveTab] = useState('home');
  const [drillIndex, setDrillIndex] = useState(0);
  const [drillStatus, setDrillStatus] = useState(null); // 'correct', 'wrong', null
  const [drillComplete, setDrillComplete] = useState(false);
  const [isSpinning, setIsSpinning] = useState(false);
  const [currentQuestion, setCurrentQuestion] = useState("PRESS SPIN");

  // --- 30 EXERCÍCIOS DE DRILLING ---
  const drillQuestions = [
    { type: 'past', instruction: 'Transform to Past', target: 'WAKE UP', options: ['WAKED UP', 'WOKE UP'], answer: 'WOKE UP' },
    { type: 'past', instruction: 'Transform to Past', target: 'FIND YOU', options: ['FOUND YOU', 'FINDED YOU'], answer: 'FOUND YOU' },
    { type: 'past', instruction: 'Transform to Past', target: 'SEE FIRE', options: ['SAW FIRE', 'SEED FIRE'], answer: 'SAW FIRE' },
    { type: 'past', instruction: 'Transform to Past', target: 'LOSE MY LIFE', options: ['LOST MY LIFE', 'LOSED MY LIFE'], answer: 'LOST MY LIFE' },
    { type: 'past', instruction: 'Transform to Past', target: 'SMILE AT ME', options: ['SMILED AT ME', 'SMILT AT ME'], answer: 'SMILED AT ME' },
    { type: 'past', instruction: 'Transform to Past', target: 'SAY GOODBYE', options: ['SAID GOODBYE', 'SAYED GOODBYE'], answer: 'SAID GOODBYE' },
    { type: 'past', instruction: 'Transform to Past', target: 'MEET AT A PARTY', options: ['MET AT A PARTY', 'MEETED AT A PARTY'], answer: 'MET AT A PARTY' },
    { type: 'past', instruction: 'Transform to Past', target: 'DRINK COFFEE', options: ['DRANK COFFEE', 'DRUNK COFFEE'], answer: 'DRANK COFFEE' },
    { type: 'past', instruction: 'Transform to Past', target: 'STAY HOME', options: ['STAYED HOME', 'STAID HOME'], answer: 'STAYED HOME' },
    { type: 'past', instruction: 'Transform to Past', target: 'GO AWAY', options: ['WENT AWAY', 'GOED AWAY'], answer: 'WENT AWAY' },
    { type: 'negative', instruction: 'Make it Negative', target: 'I WENT', options: ["I DIDN'T WENT", "I DIDN'T GO"], answer: "I DIDN'T GO" },
    { type: 'negative', instruction: 'Make it Negative', target: 'SHE SAW', options: ["SHE DIDN'T SEE", "SHE DIDN'T SAW"], answer: "SHE DIDN'T SEE" },
    { type: 'negative', instruction: 'Make it Negative', target: 'THEY MET', options: ["THEY DIDN'T MEET", "THEY DIDN'T MET"], answer: "THEY DIDN'T MEET" },
    { type: 'negative', instruction: 'Make it Negative', target: 'HE SLEPT', options: ["HE DIDN'T SLEEP", "HE DIDN'T SLEPT"], answer: "HE DIDN'T SLEEP" },
    { type: 'negative', instruction: 'Make it Negative', target: 'YOU CALLED', options: ["YOU DIDN'T CALLED", "YOU DIDN'T CALL"], answer: "YOU DIDN'T CALL" },
    { type: 'negative', instruction: 'Make it Negative', target: 'I WANTED', options: ["I DIDN'T WANT", "I NO WANTED"], answer: "I DIDN'T WANT" },
    { type: 'negative', instruction: 'Make it Negative', target: 'IT ENDED', options: ["IT DIDN'T END", "IT DIDN'T ENDED"], answer: "IT DIDN'T END" },
    { type: 'negative', instruction: 'Make it Negative', target: 'WE LOVED', options: ["WE NOT LOVED", "WE DIDN'T LOVE"], answer: "WE DIDN'T LOVE" },
    { type: 'negative', instruction: 'Make it Negative', target: 'I CRIED', options: ["I DIDN'T CRY", "I DIDN'T CRIED"], answer: "I DIDN'T CRY" },
    { type: 'negative', instruction: 'Make it Negative', target: 'THEY FOUND', options: ["THEY DIDN'T FIND", "THEY DIDN'T FOUND"], answer: "THEY DIDN'T FIND" },
    { type: 'question', instruction: 'Make it a Question', target: 'YOU SMILED', options: ['DID YOU SMILE?', 'DID YOU SMILED?'], answer: 'DID YOU SMILE?' },
    { type: 'question', instruction: 'Make it a Question', target: 'THEY MET', options: ['DID THEY MET?', 'DID THEY MEET?'], answer: 'DID THEY MEET?' },
    { type: 'question', instruction: 'Make it a Question', target: 'HE WOKE UP', options: ['DID HE WAKE UP?', 'DID HE WOKE UP?'], answer: 'DID HE WAKE UP?' },
    { type: 'question', instruction: 'Make it a Question', target: 'SHE SAW FIRE', options: ['DID SHE SAW FIRE?', 'DID SHE SEE FIRE?'], answer: 'DID SHE SEE FIRE?' },
    { type: 'question', instruction: 'Make it a Question', target: 'YOU FOUND IT', options: ['DID YOU FIND IT?', 'DID YOU FOUND IT?'], answer: 'DID YOU FIND IT?' },
    { type: 'question', instruction: 'Make it a Question', target: 'THE WORLD ENDED', options: ['DID THE WORLD END?', 'DID THE WORLD ENDED?'], answer: 'DID THE WORLD END?' },
    { type: 'question', instruction: 'Make it a Question', target: 'IT RAINED', options: ['DID IT RAIN?', 'DID IT RAINED?'], answer: 'DID IT RAIN?' },
    { type: 'question', instruction: 'Make it a Question', target: 'WE STAYED', options: ['DID WE STAY?', 'DID WE STAYED?'], answer: 'DID WE STAY?' },
    { type: 'question', instruction: 'Make it a Question', target: 'I LOST', options: ['DID I LOSE?', 'DID I LOST?'], answer: 'DID I LOSE?' },
    { type: 'question', instruction: 'Make it a Question', target: 'THEY SAID', options: ['DID THEY SAY?', 'DID THEY SAID?'], answer: 'DID THEY SAY?' },
  ];

  // --- STORY LAB ---
  const storyGaps = [
    { id: 0, hint: "be", answer: "WAS" },
    { id: 1, hint: "look", answer: "LOOKED" },
    { id: 2, hint: "see", answer: "SAW" },
    { id: 3, hint: "want", answer: "WANT" }, // "didn't want"
    { id: 4, hint: "call", answer: "CALLED" }
  ];

  // --- SPEAKING ---
  const speakingQuestions = [
    "What did you do yesterday?",
    "Did you sleep well last night?",
    "Where did you go last weekend?",
    "Who was your first best friend?",
    "What did you eat for breakfast?",
    "If the world ended yesterday, who did you call?"
  ];

  // --- LOGIC ---
  const handleDrillSelection = (choice) => {
    if (drillStatus) return;
    if (choice === drillQuestions[drillIndex].answer) {
      setDrillStatus('correct');
    } else {
      setDrillStatus('wrong');
    }
  };

  const nextDrill = () => {
    if (drillIndex < drillQuestions.length - 1) {
      setDrillIndex(drillIndex + 1);
      setDrillStatus(null);
    } else {
      setDrillComplete(true);
    }
  };

  const spinRoulette = () => {
    setIsSpinning(true);
    let count = 0;
    const interval = setInterval(() => {
      setCurrentQuestion(speakingQuestions[Math.floor(Math.random() * speakingQuestions.length)]);
      count++;
      if (count > 12) {
        clearInterval(interval);
        setIsSpinning(false);
      }
    }, 100);
  };

  return (
    <div className="flex h-screen w-full bg-[#121212] text-white font-sans overflow-hidden">
      
      {/* --- SIDEBAR --- */}
      <aside className="w-20 flex flex-col items-center py-8 border-r border-white/5 bg-black z-50 shadow-2xl">
        <div className="text-3xl font-black mb-12 text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-600">W</div>
        <nav className="flex flex-col gap-6">
          <NavItem icon={<Home size={22} />} active={activeTab === 'home'} onClick={() => setActiveTab('home')} />
          <NavItem icon={<Book size={22} />} active={activeTab === 'theory'} onClick={() => setActiveTab('theory')} />
          <NavItem icon={<Zap size={22} />} active={activeTab === 'drills'} onClick={() => setActiveTab('drills')} />
          <NavItem icon={<Edit3 size={22} />} active={activeTab === 'story'} onClick={() => setActiveTab('story')} />
          <NavItem icon={<Mic2 size={22} />} active={activeTab === 'speaking'} onClick={() => setActiveTab('speaking')} />
        </nav>
      </aside>

      {/* --- MAIN CONTENT --- */}
      <main className="relative flex-1 overflow-y-auto bg-[#121212] p-6 md:p-12">
        
        {/* Adjusted Mesh Glows */}
        <div className="absolute top-[-5%] right-[-5%] w-[800px] h-[800px] bg-blue-500/10 blur-[150px] rounded-full pointer-events-none" />
        <div className="absolute bottom-[-5%] left-[-5%] w-[800px] h-[800px] bg-red-500/10 blur-[150px] rounded-full pointer-events-none" />

        {activeTab === 'home' && (
          <section className="animate-in fade-in slide-in-from-bottom-6 duration-700 relative z-10">
            <header className="flex flex-col md:flex-row items-end gap-10 mb-16">
              <div className="w-56 h-56 bg-gradient-to-br from-[#ff0033] to-[#3d91f4] rounded-3xl shadow-[0_25px_60px_rgba(0,0,0,0.6)] flex items-center justify-center border border-white/10 relative group overflow-hidden">
                 <Music className="text-white drop-shadow-2xl group-hover:scale-110 transition-transform duration-700" size={100} />
                 <div className="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500" />
              </div>
              <div className="flex-1 pb-2">
                <div className="flex items-center gap-3 mb-6">
                  <Star size={18} className="fill-red-500 text-red-500" />
                  <span className="text-sm font-bold tracking-[0.4em] uppercase text-red-500">EXPERIENCE • LEVEL A1</span>
                </div>
                <h1 className="text-8xl font-black tracking-tighter mb-4 leading-none uppercase text-white drop-shadow-2xl">Die With <br/> A Smile</h1>
                <p className="text-gray-400 font-bold uppercase tracking-[0.2em] text-sm flex items-center gap-4">
                  <span className="w-12 h-[2px] bg-red-500"></span> Lady Gaga & Bruno Mars
                </p>
              </div>
            </header>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
              <ModuleCard icon={<Book className="text-purple-400" />} title="Past Theory" desc="The grammar map. Affirmative, Negative & Questions." onClick={() => setActiveTab('theory')} />
              <ModuleCard icon={<Zap className="text-blue-400" />} title="Power Drills" desc="30 challenges. Fast recall in context." onClick={() => setActiveTab('drills')} />
              <ModuleCard icon={<Edit3 className="text-red-500" />} title="Story Lab" desc="Typing challenge. Complete the narrative." onClick={() => setActiveTab('story')} />
              <ModuleCard icon={<Mic2 className="text-green-400" />} title="Speaking" desc="Oral production. Randomized triggers." onClick={() => setActiveTab('speaking')} />
            </div>
          </section>
        )}

        {/* --- THEORY SECTION --- */}
        {activeTab === 'theory' && (
          <section className="animate-in fade-in zoom-in-95 duration-700 relative z-10 max-w-6xl mx-auto">
            <div className="flex items-center gap-4 mb-12">
              <div className="p-3 bg-purple-500/10 rounded-2xl border border-purple-500/20">
                <Book className="text-purple-400" size={32} />
              </div>
              <div>
                <h2 className="text-5xl font-black uppercase tracking-tighter">Grammar <span className="text-purple-400">Engineering</span></h2>
                <p className="text-gray-400 font-medium tracking-widest uppercase text-xs mt-1">Simple Past Navigation Map</p>
              </div>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
              {/* Card 1: Afirmativa */}
              <div className="bg-[#1a1a1a] border border-white/5 p-10 rounded-[40px] shadow-3xl flex flex-col">
                <div className="flex items-center gap-3 mb-8">
                  <Clock className="text-blue-400" size={20} />
                  <h3 className="text-lg font-black uppercase tracking-widest">Affirmative</h3>
                </div>
                
                <div className="space-y-6 flex-1">
                  <div className="p-6 bg-white/5 rounded-2xl border border-white/5">
                    <span className="text-[10px] font-black text-blue-400 tracking-[0.3em] uppercase block mb-2">Regular Verbs</span>
                    <div className="flex items-center justify-between">
                      <div className="text-2xl font-bold">SMILE</div>
                      <ArrowRight className="text-gray-600" size={16} />
                      <div className="text-2xl font-black text-white">SMILE<span className="text-blue-500">ED</span></div>
                    </div>
                  </div>

                  <div className="p-6 bg-white/5 rounded-2xl border border-white/5">
                    <span className="text-[10px] font-black text-purple-400 tracking-[0.3em] uppercase block mb-2">Irregular Verbs</span>
                    <div className="flex items-center justify-between">
                      <div className="text-2xl font-bold">SEE</div>
                      <ArrowRight className="text-gray-600" size={16} />
                      <div className="text-2xl font-black text-white">SAW</div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Card 2: Negativa */}
              <div className="bg-[#1a1a1a] border border-white/5 p-10 rounded-[40px] shadow-3xl flex flex-col">
                <div className="flex items-center gap-3 mb-8">
                  <MinusCircle className="text-red-500" size={20} />
                  <h3 className="text-lg font-black uppercase tracking-widest">Negative</h3>
                </div>
                
                <p className="text-gray-400 text-sm mb-8 leading-relaxed">
                  Para negar no passado, usamos o auxiliar <b>DIDN'T</b>. Quando ele aparece, o verbo volta ao normal (forma base).
                </p>
                
                <div className="flex flex-col gap-4 flex-1">
                  <div className="p-5 bg-red-500/5 rounded-2xl border border-red-500/10">
                    <div className="text-[10px] font-black text-red-500 tracking-[0.3em] uppercase mb-2">Formula</div>
                    <div className="text-xl font-bold">DIDN'T + <span className="text-white">BASE VERB</span></div>
                  </div>
                  <div className="p-5 bg-white/5 rounded-2xl border border-white/5 mt-auto">
                    <div className="text-xs text-gray-500 mb-1 italic">Example:</div>
                    <div className="text-lg font-bold italic text-gray-400">"I <span className="text-red-500 underline underline-offset-4">didn't</span> <span className="text-white font-black">WAKE</span> up."</div>
                  </div>
                </div>
              </div>

              {/* Card 3: Interrogativa (NEW) */}
              <div className="bg-[#1a1a1a] border border-white/5 p-10 rounded-[40px] shadow-3xl flex flex-col">
                <div className="flex items-center gap-3 mb-8">
                  <MessageCircleQuestion className="text-green-400" size={20} />
                  <h3 className="text-lg font-black uppercase tracking-widest">Questions</h3>
                </div>
                
                <p className="text-gray-400 text-sm mb-8 leading-relaxed">
                  Em perguntas, o <b>DID</b> vem no início. Assim como na negativa, o verbo fica na forma base.
                </p>
                
                <div className="flex flex-col gap-4 flex-1">
                  <div className="p-5 bg-green-500/5 rounded-2xl border border-green-500/10">
                    <div className="text-[10px] font-black text-green-400 tracking-[0.3em] uppercase mb-2">Formula</div>
                    <div className="text-xl font-bold"><span className="text-green-400 underline underline-offset-4">DID</span> + SUBJ + <span className="text-white">VERB</span>?</div>
                  </div>
                  <div className="p-5 bg-white/5 rounded-2xl border border-white/5 mt-auto">
                    <div className="text-xs text-gray-500 mb-1 italic">Example:</div>
                    <div className="text-lg font-bold italic text-gray-400">"<span className="text-green-400 font-black">DID</span> you <span className="text-white font-black">SEE</span> the fire?"</div>
                  </div>
                </div>
              </div>
            </div>

            <div className="bg-gradient-to-r from-blue-600/20 to-red-600/20 p-8 rounded-[30px] border border-white/5 flex items-center justify-between">
                <div className="flex items-center gap-4">
                  <Info className="text-white opacity-50" size={24} />
                  <p className="text-sm font-bold uppercase tracking-widest">O mapa está completo. Hora de aplicar a engenharia.</p>
                </div>
                <button 
                  onClick={() => setActiveTab('drills')}
                  className="px-8 py-3 bg-white text-black font-black uppercase text-xs tracking-widest rounded-full hover:scale-105 transition-transform"
                >
                  Start Training
                </button>
            </div>
          </section>
        )}

        {activeTab === 'drills' && (
          <section className="h-full flex flex-col items-center justify-center relative z-10">
            {!drillComplete ? (
              <div className="w-full max-w-xl">
                <div className="flex justify-between items-center mb-8 px-4">
                  <span className="text-sm font-black text-gray-400 tracking-widest uppercase">Exercise {drillIndex + 1} / 30</span>
                  <div className="flex-1 max-w-[200px] h-1.5 bg-white/5 rounded-full mx-4 overflow-hidden">
                    <div className="h-full bg-blue-500 transition-all duration-500" style={{ width: `${((drillIndex + 1) / 30) * 100}%` }} />
                  </div>
                  {drillQuestions[drillIndex].type === 'past' && <PlusCircle size={18} className="text-blue-400" />}
                  {drillQuestions[drillIndex].type === 'negative' && <MinusCircle size={18} className="text-red-400" />}
                  {drillQuestions[drillIndex].type === 'question' && <HelpCircle size={18} className="text-green-400" />}
                </div>

                <div className="bg-[#1a1a1a] border border-white/10 rounded-[40px] p-16 shadow-3xl relative overflow-hidden group">
                  <div className={`absolute top-0 left-0 w-2 h-full transition-all duration-500 ${drillStatus === 'correct' ? 'bg-green-500 shadow-[0_0_25px_rgba(34,197,94,0.6)]' : drillStatus === 'wrong' ? 'bg-red-600' : 'bg-blue-500'}`} />
                  
                  <h3 className="text-xs font-black text-gray-500 tracking-[0.3em] uppercase mb-4">{drillQuestions[drillIndex].instruction}</h3>
                  <div className="text-5xl md:text-6xl font-black mb-16 tracking-tighter uppercase text-white leading-tight">{drillQuestions[drillIndex].target}</div>
                  
                  <div className="grid grid-cols-1 gap-4">
                    {drillQuestions[drillIndex].options.map((opt, i) => (
                      <DrillOption 
                        key={i + drillIndex} 
                        label={opt} 
                        status={drillStatus} 
                        isCorrect={opt === drillQuestions[drillIndex].answer}
                        onClick={() => handleDrillSelection(opt)} 
                      />
                    ))}
                  </div>

                  {drillStatus && (
                    <div className="mt-10 animate-in fade-in slide-in-from-bottom-4 duration-500">
                      <button 
                        onClick={nextDrill}
                        className="w-full py-5 bg-white text-black font-black uppercase tracking-widest rounded-2xl flex items-center justify-center gap-3 hover:bg-gray-200 transition-all shadow-xl"
                      >
                        {drillStatus === 'correct' ? "Correct! Next Challenge" : "Review & Continue"} <ArrowRight size={20} />
                      </button>
                    </div>
                  )}
                </div>
              </div>
            ) : (
              <div className="text-center animate-in zoom-in-95 duration-700">
                <div className="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-10 shadow-[0_0_50px_rgba(34,197,94,0.4)]">
                   <Trophy size={48} className="text-black" />
                </div>
                <h2 className="text-6xl font-black uppercase tracking-tighter mb-6">Drill Mastered</h2>
                <p className="text-gray-400 text-xl mb-12 max-w-md mx-auto">30 High-intensity patterns completed. Your past tense logic is solid.</p>
                <button 
                    onClick={() => {setDrillIndex(0); setDrillStatus(null); setDrillComplete(false);}} 
                    className="px-12 py-5 bg-blue-600 text-white font-black uppercase tracking-[0.2em] rounded-full hover:scale-105 transition-transform shadow-xl"
                >
                    Restart Session
                </button>
              </div>
            )}
          </section>
        )}

        {activeTab === 'story' && (
          <section className="max-w-5xl mx-auto pt-10 relative z-10">
            <h2 className="text-5xl font-black uppercase tracking-tighter mb-12 flex flex-col md:flex-row md:items-center gap-4">
              The Last <span className="text-red-500">Night Story</span>
              <span className="text-xs font-bold text-blue-500 bg-blue-500/10 px-4 py-2 rounded-full border border-blue-500/20 tracking-widest uppercase">Writing Module</span>
            </h2>
            
            <div className="bg-[#1a1a1a] border border-white/10 p-12 md:p-20 rounded-[40px] text-3xl md:text-4xl leading-[2.4] font-light text-gray-300 shadow-3xl relative overflow-hidden">
              <div className="absolute top-0 left-12 w-[1px] h-full bg-gradient-to-b from-transparent via-white/10 to-transparent"></div>
              
              <div className="relative pl-8">
                Yesterday, the world 
                <StoryInput data={storyGaps[0]} /> 
                ending. I 
                <StoryInput data={storyGaps[1]} /> 
                at the sky and I 
                <StoryInput data={storyGaps[2]} /> 
                fire. I didn't 
                <StoryInput data={storyGaps[3]} /> 
                to be alone. So I 
                <StoryInput data={storyGaps[4]} /> 
                you. We stayed together until the end.
              </div>
            </div>
            
            <div className="mt-12 flex items-center gap-4 text-sm text-gray-500 font-black uppercase tracking-[0.3em] pl-8 opacity-60">
              <Edit3 size={18} />
              <span>Fill the gaps (Base verb in brackets) & Press Enter</span>
            </div>
          </section>
        )}

        {activeTab === 'speaking' && (
          <section className="h-full flex flex-col items-center justify-center text-center relative z-10 px-4">
            <div className={`transition-all duration-700 ${isSpinning ? 'opacity-10 blur-xl scale-75' : 'opacity-100'}`}>
              <h2 className="text-5xl md:text-8xl font-black uppercase tracking-tighter max-w-5xl mb-20 leading-[0.9] drop-shadow-2xl">
                {currentQuestion}
              </h2>
            </div>
            
            <div className="relative group">
                <div className="absolute inset-0 bg-red-600 rounded-full blur-3xl opacity-20 group-hover:opacity-40 transition-opacity" />
                <button 
                  onClick={spinRoulette}
                  disabled={isSpinning}
                  className="relative w-28 h-28 bg-gradient-to-br from-red-600 to-red-700 rounded-full flex items-center justify-center shadow-2xl hover:scale-110 transition-all active:scale-90 disabled:opacity-50 border-4 border-black"
                >
                  {isSpinning ? <RotateCcw className="animate-spin text-white" size={40} /> : <Play size={48} className="ml-2 text-white fill-white" />}
                </button>
            </div>
            
            <p className="mt-12 text-gray-600 font-black uppercase tracking-[0.5em] text-[12px]">Spin for Oral Production</p>
          </section>
        )}

      </main>
    </div>
  );
};

// --- SUBCOMPONENTS ---

const NavItem = ({ icon, active, onClick }) => (
  <div 
    onClick={onClick}
    className={`p-4 rounded-2xl cursor-pointer transition-all duration-500 flex items-center justify-center
      ${active ? 'bg-red-600 text-white shadow-[0_0_30px_rgba(255,0,51,0.4)] scale-110' : 'text-gray-500 hover:text-white hover:bg-white/5'}`}
  >
    {icon}
  </div>
);

const ModuleCard = ({ icon, title, desc, onClick }) => (
  <div 
    onClick={onClick}
    className="group bg-[#1a1a1a] border border-white/5 p-10 rounded-[32px] cursor-pointer transition-all duration-500 hover:bg-[#222] hover:border-white/20 hover:-translate-y-3 shadow-2xl"
  >
    <div className="mb-8 p-5 bg-white/5 rounded-2xl w-fit group-hover:bg-white/10 transition-colors shadow-inner">{icon}</div>
    <h3 className="text-2xl font-bold mb-4 uppercase tracking-tighter text-white">{title}</h3>
    <p className="text-gray-500 text-base leading-relaxed mb-8">{desc}</p>
    <div className="flex items-center gap-3 text-[10px] font-black text-gray-400 opacity-0 group-hover:opacity-100 transition-all translate-x-[-15px] group-hover:translate-x-0 tracking-widest">
      LAUNCH STUDIO <ArrowRight size={14} />
    </div>
  </div>
);

const DrillOption = ({ label, status, isCorrect, onClick }) => {
  const isThisChoiceCorrect = status === 'correct' && isCorrect;
  const isThisChoiceWrong = status === 'wrong' && !isCorrect;

  return (
    <button
      onClick={onClick}
      disabled={status !== null}
      className={`w-full py-5 rounded-2xl font-black uppercase tracking-[0.2em] text-sm border transition-all duration-500
        ${isThisChoiceCorrect ? 'bg-green-500 border-green-400 text-black shadow-[0_0_30px_rgba(34,197,94,0.4)]' : 
          isThisChoiceWrong ? 'bg-red-600 border-red-500 text-white animate-shake' : 
          'bg-[#222] border-white/5 hover:border-white/20 text-gray-400 hover:text-white'}`}
    >
      {label}
      {isThisChoiceCorrect && <CheckCircle2 className="inline ml-3" size={18} />}
      {isThisChoiceWrong && <XCircle className="inline ml-3" size={18} />}
    </button>
  );
};

const StoryInput = ({ data }) => {
  const [userInput, setUserInput] = useState('');
  const [status, setStatus] = useState('idle'); 

  const handleValidation = (e) => {
    if (e.key === 'Enter') {
      if (userInput.toUpperCase().trim() === data.answer) {
        setStatus('correct');
      } else {
        setStatus('wrong');
        setTimeout(() => setStatus('idle'), 1000);
      }
    }
  };

  if (status === 'correct') {
    return (
      <span className="mx-3 text-green-400 font-black border-b-4 border-green-500/30 animate-in zoom-in duration-500">
        {data.answer}
      </span>
    );
  }

  return (
    <span className="relative inline-flex flex-col mx-3 align-middle group">
      <input
        type="text"
        value={userInput}
        onChange={(e) => setUserInput(e.target.value)}
        onKeyDown={handleValidation}
        placeholder="___"
        className={`bg-[#222] border-b-4 outline-none text-center font-black w-44 py-1 transition-all uppercase tracking-widest text-3xl rounded-t-xl
          ${status === 'wrong' ? 'border-red-600 text-red-500 animate-shake' : 
            'border-blue-500 text-blue-400 focus:border-white focus:bg-[#2a2a2a]'}`}
      />
      <span className="text-[10px] text-gray-600 font-black uppercase tracking-[0.2em] mt-2 text-center">
        ({data.hint})
      </span>
    </span>
  );
};

export default App;

// CSS Adicional para Animações e Scrollbars
if (typeof document !== 'undefined') {
  const styleTag = document.createElement("style");
  styleTag.innerHTML = `
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      75% { transform: translateX(6px); }
    }
    .animate-shake { animation: shake 0.15s ease-in-out infinite; }
    
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: #444; }
    
    body { background-color: #0f0f0f; }
  `;
  document.head.appendChild(styleTag);
}